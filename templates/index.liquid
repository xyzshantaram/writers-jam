{% block extra_head %}
<link rel="stylesheet" href="/index.css">
{% endblock %}

{% layout "base.liquid", heading:"Welcome to Writing Jams!", title:title %}
{% block content %}

<p>
    {% if postCount %}
        <span class="counter">{{ postCount }}</span> posts so far
    {% endif %}
    {% if postCount and viewCount %}
        totalling <span class="counter">{{ viewCount }}</span> views
    {% endif %}
</p>

<p>Writing Jams are a simple collaborative writing exercise where people get together to create and celebrate each other's work!</p>

<p>The rules are simple:</p>

<ul>
    <li>Write a minimum of 100 words on a given theme, no upper limit.</li>
    <li>This week's theme is: <strong><em>"How are you feeling?"</em></strong></li>
    <li>You are encouraged to get creative with the theme. You can literally talk about your day, or use it as a dialogue or opening line in your story, or write about the phrase itself, or the history of asking people how they are... the possibilities are endless!</li>
    <li>When done, simply post your creation to this website! There will be a discussion at 7 PM IST on 2025-07-13.</li>
</ul>

<p>What are you waiting for?</p>

<a class="btn invert" href="/post"><strong>Get started!</strong></a>

<h2>Posts</h2>
<div class="cta-links">
    {% if postCount != 0 %}
    <p>
    <a href="/post/random">Random post</a>
    </p>
    {% endif %}

    <p>
        {% if currentNsfw == "yes" %}
            <a href="{{ queries.nsfw_toggle }}">Hide NSFW</a>
        {% else %}
            <a href="{{ queries.nsfw_toggle }}">Show NSFW</a>
        {% endif %}
    </p>

    <p>
        {% if currentSort == "views" %}
            Sorting by views. <a href="{{ queries.sort_updated }}">Sort by last update</a>
        {% else %}
            Sorting by last update. <a href="{{ queries.sort_views }}">Sort by views</a>
        {% endif %}
    </p>
</div>

{% if results.size %}
    <div class="posts">
    {% for post in results %}
        <a class="post-item" href="/post/{{ post.id }}">
            <div class="post-title">{{ post.title | default: "Untitled" }}
                {% if post.nsfw %}
                    <span class="badge danger invert">NSFW</span>
                {% endif %}
            </div>
            <div class="post-author">by <strong>{{ post.author | default: "Anonymous" }}</strong></div>
            {% if post.triggers.size != 0 %}
                <strong>TRIGGER WARNINGS: </strong> {{ post.triggers }}
            {% endif %}
            <div class="view-count">
                <i class="iconoir-eye" aria-label="View count" title="View count"></i> 
                {{ post.views }}
            </div>
            <div class="updated-time">
                <i class="iconoir-clock" aria-label="Last updated" title="Last updated"></i> 
                {{ post.updated | time_ago }}
            </div>
        </a>
    {% endfor %}
    </div>
{% else %}
    <p>No posts yet. <a href="/post">Be the first!</a></p>
{% endif %}

{% endblock %}